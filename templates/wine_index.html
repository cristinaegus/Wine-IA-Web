<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üç∑ Clasificador de Calidad de Vinos</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="{{ url_for('static', filename='style/wine_index.css') }}"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container-fluid">
      <div class="wine-container">
        <!-- Header -->
        <div class="wine-header">
          <i class="fas fa-wine-glass wine-icon"></i>
          <h1 class="mb-0">üç∑ Clasificador de Calidad de Vinos</h1>
          <p class="mb-0 mt-2">
            Sistema de Machine Learning para Predicci√≥n de Calidad
          </p>
        </div>

        <!-- Formulario -->
        <div class="wine-form">
          <form method="POST" id="wineForm">
            <div class="row">
              <!-- Acidez Fija -->
              <div class="col-md-6 mb-3">
                <div class="parameter-card">
                  <label for="fixed_acidity" class="form-label">
                    <i class="fas fa-flask"></i> Acidez Fija (g/L)
                    <i
                      class="fas fa-info-circle info-tooltip"
                      title="√Åcidos tart√°ricos y m√°licos (4.6 - 15.9)"
                    ></i>
                  </label>
                  <div class="input-group">
                    <span class="input-group-text"
                      ><i class="fas fa-vial"></i
                    ></span>
                    <input
                      type="number"
                      step="0.1"
                      class="form-control"
                      id="fixed_acidity"
                      name="fixed_acidity"
                      placeholder="7.4"
                      min="4"
                      max="16"
                      required
                    />
                  </div>
                </div>
              </div>

              <!-- Acidez Vol√°til -->
              <div class="col-md-6 mb-3">
                <div class="parameter-card">
                  <label for="volatile_acidity" class="form-label">
                    <i class="fas fa-cloud"></i> Acidez Vol√°til (g/L)
                    <i
                      class="fas fa-info-circle info-tooltip"
                      title="√Åcido ac√©tico, altos niveles dan sabor a vinagre (0.12 - 1.58)"
                    ></i>
                  </label>
                  <div class="input-group">
                    <span class="input-group-text"
                      ><i class="fas fa-wind"></i
                    ></span>
                    <input
                      type="number"
                      step="0.01"
                      class="form-control"
                      id="volatile_acidity"
                      name="volatile_acidity"
                      placeholder="0.7"
                      min="0.1"
                      max="1.6"
                      required
                    />
                  </div>
                </div>
              </div>

              <!-- √Åcido C√≠trico -->
              <div class="col-md-6 mb-3">
                <div class="parameter-card">
                  <label for="citric_acid" class="form-label">
                    <i class="fas fa-lemon"></i> √Åcido C√≠trico (g/L)
                    <i
                      class="fas fa-info-circle info-tooltip"
                      title="A√±ade frescura y sabor (0 - 1)"
                    ></i>
                  </label>
                  <div class="input-group">
                    <span class="input-group-text"
                      ><i class="fas fa-seedling"></i
                    ></span>
                    <input
                      type="number"
                      step="0.01"
                      class="form-control"
                      id="citric_acid"
                      name="citric_acid"
                      placeholder="0.0"
                      min="0"
                      max="1"
                      required
                    />
                  </div>
                </div>
              </div>

              <!-- Az√∫car Residual -->
              <div class="col-md-6 mb-3">
                <div class="parameter-card">
                  <label for="residual_sugar" class="form-label">
                    <i class="fas fa-cube"></i> Az√∫car Residual (g/L)
                    <i
                      class="fas fa-info-circle info-tooltip"
                      title="Az√∫car restante despu√©s fermentaci√≥n (0.9 - 15.5)"
                    ></i>
                  </label>
                  <div class="input-group">
                    <span class="input-group-text"
                      ><i class="fas fa-candy-cane"></i
                    ></span>
                    <input
                      type="number"
                      step="0.1"
                      class="form-control"
                      id="residual_sugar"
                      name="residual_sugar"
                      placeholder="1.9"
                      min="0.5"
                      max="16"
                      required
                    />
                  </div>
                </div>
              </div>

              <!-- Cloruros -->
              <div class="col-md-6 mb-3">
                <div class="parameter-card">
                  <label for="chlorides" class="form-label">
                    <i class="fas fa-tint"></i> Cloruros (g/L)
                    <i
                      class="fas fa-info-circle info-tooltip"
                      title="Cantidad de sal en el vino (0.012 - 0.611)"
                    ></i>
                  </label>
                  <div class="input-group">
                    <span class="input-group-text"
                      ><i class="fas fa-prescription-bottle"></i
                    ></span>
                    <input
                      type="number"
                      step="0.001"
                      class="form-control"
                      id="chlorides"
                      name="chlorides"
                      placeholder="0.076"
                      min="0.01"
                      max="0.7"
                      required
                    />
                  </div>
                </div>
              </div>

              <!-- Di√≥xido de Azufre Libre -->
              <div class="col-md-6 mb-3">
                <div class="parameter-card">
                  <label for="free_sulfur_dioxide" class="form-label">
                    <i class="fas fa-shield-alt"></i> SO‚ÇÇ Libre (mg/L)
                    <i
                      class="fas fa-info-circle info-tooltip"
                      title="Previene crecimiento microbiano (1 - 72)"
                    ></i>
                  </label>
                  <div class="input-group">
                    <span class="input-group-text"
                      ><i class="fas fa-bacteria"></i
                    ></span>
                    <input
                      type="number"
                      step="1"
                      class="form-control"
                      id="free_sulfur_dioxide"
                      name="free_sulfur_dioxide"
                      placeholder="11"
                      min="1"
                      max="80"
                      required
                    />
                  </div>
                </div>
              </div>

              <!-- Di√≥xido de Azufre Total -->
              <div class="col-md-6 mb-3">
                <div class="parameter-card">
                  <label for="total_sulfur_dioxide" class="form-label">
                    <i class="fas fa-layer-group"></i> SO‚ÇÇ Total (mg/L)
                    <i
                      class="fas fa-info-circle info-tooltip"
                      title="Forma libre + forma enlazada (6 - 289)"
                    ></i>
                  </label>
                  <div class="input-group">
                    <span class="input-group-text"
                      ><i class="fas fa-compress"></i
                    ></span>
                    <input
                      type="number"
                      step="1"
                      class="form-control"
                      id="total_sulfur_dioxide"
                      name="total_sulfur_dioxide"
                      placeholder="34"
                      min="5"
                      max="300"
                      required
                    />
                  </div>
                </div>
              </div>

              <!-- Densidad -->
              <div class="col-md-6 mb-3">
                <div class="parameter-card">
                  <label for="density" class="form-label">
                    <i class="fas fa-weight"></i> Densidad (g/cm¬≥)
                    <i
                      class="fas fa-info-circle info-tooltip"
                      title="Depende del alcohol y az√∫car (0.99007 - 1.00369)"
                    ></i>
                  </label>
                  <div class="input-group">
                    <span class="input-group-text"
                      ><i class="fas fa-balance-scale"></i
                    ></span>
                    <input
                      type="number"
                      step="0.0001"
                      class="form-control"
                      id="density"
                      name="density"
                      placeholder="0.9978"
                      min="0.99"
                      max="1.004"
                      required
                    />
                  </div>
                </div>
              </div>

              <!-- pH -->
              <div class="col-md-6 mb-3">
                <div class="parameter-card">
                  <label for="pH" class="form-label">
                    <i class="fas fa-thermometer-half"></i> pH
                    <i
                      class="fas fa-info-circle info-tooltip"
                      title="Nivel de acidez (2.74 - 4.01)"
                    ></i>
                  </label>
                  <div class="input-group">
                    <span class="input-group-text">pH</span>
                    <input
                      type="number"
                      step="0.01"
                      class="form-control"
                      id="pH"
                      name="pH"
                      placeholder="3.51"
                      min="2.5"
                      max="4.5"
                      required
                    />
                  </div>
                </div>
              </div>

              <!-- Sulfatos -->
              <div class="col-md-6 mb-3">
                <div class="parameter-card">
                  <label for="sulphates" class="form-label">
                    <i class="fas fa-atom"></i> Sulfatos (g/L)
                    <i
                      class="fas fa-info-circle info-tooltip"
                      title="Aditivo antioxidante (0.33 - 2.0)"
                    ></i>
                  </label>
                  <div class="input-group">
                    <span class="input-group-text"
                      ><i class="fas fa-plus-circle"></i
                    ></span>
                    <input
                      type="number"
                      step="0.01"
                      class="form-control"
                      id="sulphates"
                      name="sulphates"
                      placeholder="0.56"
                      min="0.3"
                      max="2.1"
                      required
                    />
                  </div>
                </div>
              </div>

              <!-- Alcohol -->
              <div class="col-md-6 mb-3">
                <div class="parameter-card">
                  <label for="alcohol" class="form-label">
                    <i class="fas fa-percentage"></i> Alcohol (% vol)
                    <i
                      class="fas fa-info-circle info-tooltip"
                      title="Porcentaje de alcohol (8.4 - 14.9)"
                    ></i>
                  </label>
                  <div class="input-group">
                    <span class="input-group-text"
                      ><i class="fas fa-wine-bottle"></i
                    ></span>
                    <input
                      type="number"
                      step="0.1"
                      class="form-control"
                      id="alcohol"
                      name="alcohol"
                      placeholder="9.4"
                      min="8"
                      max="15"
                      required
                    />
                  </div>
                </div>
              </div>
            </div>

            <!-- Botones -->
            <div class="text-center mt-4">
              <button type="submit" class="btn btn-wine btn-lg me-3">
                <i class="fas fa-brain"></i> Predecir Calidad
              </button>
              <button
                type="button"
                class="btn btn-outline-secondary btn-lg"
                onclick="loadExample()"
              >
                <i class="fas fa-lightbulb"></i> Cargar Ejemplo
              </button>
            </div>
          </form>

          <!-- Resultado -->
          {% if show_result %}
          <div class="result-card">
            <div class="text-center">
              {% if error %}
              <i class="fas fa-exclamation-triangle text-danger large-icon"></i>
              <h4 class="text-danger mt-2">{{ prediction_text }}</h4>
              {% else %}
              <i class="fas fa-award text-success large-icon"></i>
              <h4 class="mt-2">{{ prediction_text }}</h4>
              <p class="{{ category_color }} fs-5 fw-bold">
                {{ quality_category }}
              </p>
              <p class="text-muted">{{ confidence }}</p>

              <!-- Escala visual -->
              <div class="mt-3">
                <h6>Escala de Calidad:</h6>
                <div class="d-flex justify-content-center align-items-center">
                  <span class="badge bg-danger me-1">3-4</span>
                  <span class="badge bg-warning me-1">5-6</span>
                  <span class="badge bg-success">7-8</span>
                </div>
                <small class="text-muted">Baja ‚Üí Media ‚Üí Alta</small>
              </div>
              {% endif %}
            </div>
          </div>
          {% endif %}

          <!-- Informaci√≥n adicional -->
          <div class="mt-4">
            <div class="row">
              <div class="col-md-6">
                <div class="card">
                  <div class="card-body">
                    <h6 class="card-title">
                      <i class="fas fa-info-circle"></i> Acerca del Modelo
                    </h6>
                    <p class="card-text small">
                      Modelo XGBoost entrenado con 1,599 muestras de vino tinto.
                      Accuracy: 97.5%
                    </p>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="card">
                  <div class="card-body">
                    <h6 class="card-title">
                      <i class="fas fa-wine-glass"></i> Rangos T√≠picos
                    </h6>
                    <p class="card-text small">
                      Los valores est√°n basados en vinos tintos portugueses
                      "Vinho Verde".
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Enlace a p√°gina About -->
          <div class="text-center mt-4">
            <a href="/about" class="btn btn-outline-info">
              <i class="fas fa-info-circle"></i> M√°s Informaci√≥n del Modelo
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="text-center py-3 mt-4">
      <div class="container">
        <p class="text-white-50 mb-0">
          <i class="fas fa-copyright"></i> cegusquiza 2025
        </p>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Funci√≥n para cargar un ejemplo
      function loadExample() {
        document.getElementById("fixed_acidity").value = "7.4";
        document.getElementById("volatile_acidity").value = "0.70";
        document.getElementById("citric_acid").value = "0.00";
        document.getElementById("residual_sugar").value = "1.9";
        document.getElementById("chlorides").value = "0.076";
        document.getElementById("free_sulfur_dioxide").value = "11";
        document.getElementById("total_sulfur_dioxide").value = "34";
        document.getElementById("density").value = "0.9978";
        document.getElementById("pH").value = "3.51";
        document.getElementById("sulphates").value = "0.56";
        document.getElementById("alcohol").value = "9.4";
      }

      // Tooltips de Bootstrap
      var tooltipTriggerList = [].slice.call(
        document.querySelectorAll("[title]")
      );
      var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl);
      });

      // Validaci√≥n en tiempo real
      document.querySelectorAll('input[type="number"]').forEach((input) => {
        input.addEventListener("input", function () {
          if (this.checkValidity()) {
            this.classList.remove("is-invalid");
            this.classList.add("is-valid");
          } else {
            this.classList.remove("is-valid");
            this.classList.add("is-invalid");
          }
        });
      });
    </script>
  </body>
</html>
